#include <stdbool.h>
#include <stddef.h>
#include <stdint.h>

void vmsbc_vxm(size_t n, const uint32_t x[], const uint32_t y, const uint8_t m[], uint8_t z[]);

bool get_bit(const uint8_t m[], uint64_t i) {
  uint64_t off = i / 8;
  uint64_t bit = i - off * 8;
  return m[off] & (1 << bit);
}

int main() {
  uint32_t x[100] = {0xda25067d, 0x16bcf3c2, 0x885d61d1, 0x7c035f7f, 0x84bd22d2, 0x230d8e48, 0x259e6b5f, 0x97b4f706,
                     0xfb615873, 0xaabd3967, 0x32a8d803, 0x9e3e90b0, 0x8631b371, 0x125f25be, 0xcaca367e, 0x3c52f38f,
                     0x1aa9b742, 0x6d414fff, 0x686e57aa, 0x4bb62915, 0x37d3f90a, 0x09a25479, 0x969f7aa8, 0xcfb4789d,
                     0x10b7f1ad, 0xae481324, 0x13c6e047, 0xfaeb0176, 0x33b16b02, 0x5ba14a37, 0xa7d16220, 0x9366e1ad,
                     0x862f144e, 0xaa987edd, 0x4b4fea94, 0x4eca7532, 0xc0779d1c, 0xd8d010e8, 0xae22d60c, 0xc805e576,
                     0xb7ea99b0, 0xa3b0a0ad, 0x613ef1f3, 0xe54dd8a5, 0x1ee9d761, 0x6a5d41dd, 0x1311cd93, 0x1145ea8c,
                     0x8162b5b6, 0x1fc9678d, 0x6d2f2e56, 0xc42d592e, 0x41fa67c0, 0xfce1ddef, 0x2316cea4, 0x6a9539c0,
                     0x43dbeb2d, 0x90c029e2, 0x78ac0c91, 0xd054c607, 0x65bb58d9, 0x5fabcfa4, 0xb5394e89, 0xf1f87472,
                     0xe7125753, 0xc34f7426, 0x5eeb9a45, 0x0196cad6, 0xcc2f8ac0, 0x1b2142f5, 0x21d347e1, 0xb5b1bab2,
                     0x844e207a, 0x3db5c68d, 0xb31f66a6, 0xe2ed4ed6, 0x468f0cd5, 0xf3ed9035, 0x9e74c5e5, 0x818cec13,
                     0x1fd57d0e, 0xe7e92519, 0x489a49f8, 0xd0d80715, 0xc93e8c98, 0xe5115be1, 0x31a01612, 0x58517d02,
                     0xb9f7d940, 0xbe915aae, 0x385298a1, 0xbbcb23a6, 0x95efef86, 0x452c74a6, 0x33c45910, 0x01e56cc1,
                     0xd2ab539d, 0xe73b246d, 0x86b9c598, 0xa2bc6755};
  uint64_t y = 0x80000000;
  uint8_t m[13] = {0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff};
  uint8_t z[13] = {};

  vmsbc_vxm(100, x, y, m, z);

  for (int i = 0; i < 100; i++) {
    if (get_bit(z, i) != (y >= x[i])) {
      return 1;
    }
  }

  return 0;
}
